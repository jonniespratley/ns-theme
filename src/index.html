<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <title>Stencil Component Starter</title>

    <style>
      html:not(.hydrated) body {
        opacity: 0;
      }
      .hydrated body {
        opacity: 1;
      }
      html,
      body {
        margin: 0;
        padding: 0;
      }
    </style>
    <!--
 <link rel="stylesheet" href="https://assets.codepen.io/49212/font.css">
    
    <link rel="stylesheet" href="https://north-star-ui-cdn.run.aws-usw02-pr.ice.predix.io/css/px-light-theme.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.0/css/font-awesome.css"/>
  
    <link rel="stylesheet" href="http://localhost:9001/src.77de5100.css">
    -->
    <script>
      window.nav = {
        session: { title: 'Home', menus: ['workflow1'] },
        main: {
          items: [
            {
              label: 'Polling App',
              icon: 'fa-html5',
              path: 'https://apphub-microapp-seed-next.run.aws-usw02-pr.ice.predix.io/#',

              items: [],
              order: 1,
              default: false,
              id: 'pollapp.0',
            },
            {
              label: 'Mocha App',
              icon: 'fa-code',
              path: 'https://cdpn.io/jonniespratley/debug/qBWZMpY',
              items: [],
              order: 0,
              default: true,
              id: 'testapp.0',
            },
            {
              label: 'AngularApp',
              icon: 'fa-handicap',
              path: '/angularapp',
              items: [],
              order: 3,
              id: 'angularapp.0',
            },
            {
              label: 'PolymerApp',
              icon: 'fa-cube',
              path: '/polymerapp',
              items: [],
              order: 5,
              default: false,
              id: 'polymerapp.0',
            },
            {
              label: 'TraceID App',
              icon: 'fa-heartbeat',
              path: '/sample-traceid-app',
              items: [],
              order: 7,
              default: false,
              id: 'app2.0',
            },
            {
              label: 'StoppedMicroapp',
              icon: 'fa-circle',
              path: '/stoppedmicroapp',
              items: [],
              order: 10,
              default: false,
              id: 'stoppedmicroapp.0',
            },
          ],
        },
        profile: {
          items: [
            {
              label: 'My Profile',
              icon: 'fa-user',
              path: '/profile',
              items: [],
              order: 13,
              default: false,
              id: 'profileapp.0',
            },
          ],
        },
        settings: {
          items: [
            {
              label: 'Settings App',
              icon: 'fa-gear',
              path: '/settings',
              items: [],
              order: 12,
              default: false,
              id: 'settings.0',
            },
          ],
        },
        paths: {
          pollapp: '/pollapp',
          testapp: '/testapp',
          angularapp: '/angularapp',
          polymerapp: '/polymerapp',
          app2: '/sample-traceid-app',
          stoppedmicroapp: '/stoppedmicroapp',
          settings: '/settings',
          profileapp: '/profile',
        },
        contextPath: '',
        user: {
          name: '@jonniespratley',
          firstName: 'Jonnie',
          lastName: 'Spratley',
          picture: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/49212/profile/profile-80.jpg?4',
          user_id: 'cef303ee-0830-4589-adae-b37088555946',
          user_name: 'test',
          email: 'jonniespratley@gmail.com',
        },
        preferences: {
          preferredLocale: 'en',
        },
        appName: 'AppHub Dev',
        localeData: {
          logOut: 'Log Out',
          toastTextDefault: 'You have a new message.',
          toastActionLabelDefault: 'Open',
          collapseAllLabel: 'Collapse All',
          expandAllLabel: 'Expand All',
          closeTooltip: 'Close',
          showAlphaViewTooltip: 'Show Alphabetical View',
          showFolderViewTooltip: 'Show Folder View',
        },
      };
    </script>

    <script src="http://localhost:1234/src.77de5100.js"></script>

    <script type="module" src="/build/ns-theme.esm.js"></script>
    <script nomodule src="/build/ns-theme.js"></script>
  </head>
  <body>
    <ns-theme id="theme">
      <!-- AppShell Menu Button -->
      <div id="js-menu" slot="menu"></div>
    </ns-theme>

    <!--


    
    <br>
    <br>
    <hr>
    <ns-theme-header id="headerExample" show-menu slot="header">
      <ns-theme-tabs id="exampleTabs" slot="tabs"></ns-theme-tabs>
     
    </ns-theme-header>

    <ns-theme-panels id="examplePanels" slot="content"> </ns-theme-panels>

    <ns-theme-drawer id="nsThemeTabsDrawer" header-text="Tab Management" slot="drawer" anchor="right">
      <ns-theme-list-group id="nsThemeTabsList"></ns-theme-list-group>
    </ns-theme-drawer>

    <div id="js-menu"></div>
    <div id="js-user-menu"></div>
    <button id="addTab">Add Tab</button>
    
      <h2>ns-theme-header demo</h2>

      <ns-theme-header id="headerExample">
        <div slot="left">Left</div>
        <div slot="tabs"">Tab area</div>
        <div slot="right">Right side</div>
      </ns-theme-header>
      <br/>
      <ns-theme-header id="headerExample2">
        <div slot="menu">Menu Icon</div>
        <div slot="home">home</div>
        <div slot="left">Left</div>
        <div slot="tabs"">Tab area</div>
        <div slot="right">Right side</div>
      </ns-theme-header>
      <br>
      
      <h3>With Menu</h3>
      <ns-theme-header id="headerExample3" show-menu="true"></ns-theme-header>
      
      <h3>With Menu + Home</h3>
      <ns-theme-header id="headerExample4" show-menu="true" show-home="true"></ns-theme-header>
    
    
    <ns-theme-drawer id="d3" anchor="right" header-text="Tab Manager">
      <div slot="content"><ns-theme-list-group></ns-theme-list-group></div>
    </ns-theme-drawer>

    <ns-theme-drawer id="d1" anchor="left">
      <p>This is DEFAULT drawer 1</p>
    </ns-theme-drawer>
    <ns-theme-drawer id="d2" anchor="top">
      <p>This is top drawer 2</p>
    </ns-theme-drawer>
    <ns-theme-drawer id="d4" anchor="bottom">
      <p>This is bottom drawer</p>
    </ns-theme-drawer>
    <br />
    <button id="d1btn">left drawer</button>
    <button id="d2btn">top drawer</button>
    <button id="d3btn">right drawer</button>
    <button id="d4btn">bottom drawer</button>


    <h2>ns-theme-panels</h2>

    <button>Next</button>
    <button>Prev</button>
    
    <ns-theme-panel id="p1">
      <h2>This is panel content</h2>
      <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Inventore, modi! Natus eveniet enim odit inventore ipsum expedita, repellat praesentium doloribus non totam facilis dignissimos magnam dolorum quas accusantium impedit nobis.</p>
    </ns-theme-panel>

    <ns-theme-panel id="p2" loading>
      <h2>Loading Panel</h2>
      <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Inventore, modi! Natus eveniet enim odit inventore ipsum expedita, repellat praesentium doloribus non totam facilis dignissimos magnam dolorum quas accusantium impedit nobis.</p>
    </ns-theme-panel>
       
 -->

    <script>
      (async () => {
        window.onmessage = function (event) {
          if (event.data == 'reply') {
            console('Reply received!');
          }
        };

        let count = 0;

        await customElements.whenDefined('ns-theme');
        const nsTheme = document.querySelector('ns-theme');

        function createTab(obj) {
          count++;
          let t = {
            id: count === 0 ? 'home' : `app-${count}`,
            label: `Tab ${count}`,
            href: `demo.html?app=some-app-${count}`,
            panelId: `panel-${count}`,
            ...obj,
          };
          return t;
        }
        window.createTab = createTab;

        function createPane(t) {
          let pane = document.createElement('div');
          pane.id = t.panelId;
          pane.innerHTML = `
              <h4>${t.id}</h4>
              <p>This is the tab content</p>
              `;
          return pane;
        }

        async function addTab(obj) {
          let t = createTab(obj);
          let pane = await nsTheme.createPane(t);
          let newTab = await nsTheme.addTabAndPanel(t, pane);
          console.log(newTab);

          //   let newPanel = await nsTheme.addPanel(newTab, pane);
          // return await toggleTab(newTab);
        }

        document.addEventListener('DOMContentLoaded', () => {
          nsTheme.session = window.nav;
          let sortedItems = window.nav.main.items.sort((a, b) => {
            return a.order - b.order;
          });

          // TODO - SET THE DEFAULT TAB
          let defaultTab = sortedItems.find(item => item.default === true);
          defaultTab.home = true;
          defaultTab.title = 'Default';
          //addTab(defaultTab);
          //nsTheme.selectHomeTab();

          document.addEventListener('menuToggleClick', () => {
            console.log('toggle js-menu menu');
            //document.querySelector('#js-menu [data-testid="app-menu__toggle"]').click();
          });
        });
      })();
    </script>
  </body>
</html>
