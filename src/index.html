<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <title>Stencil Component Starter</title>
    <!--

    
    <link rel="stylesheet" href="https://north-star-ui-cdn.run.aws-usw02-pr.ice.predix.io/css/px-light-theme.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.0.0/css/font-awesome.css"/>
  
    <link rel="stylesheet" href="http://localhost:9001/src.77de5100.css">
    -->
    <script>
      window.nav = {
        main: {
          items: [
            {
              label: 'Polling App',
              icon: 'fa-html5',
              path: '/pollapp',
              items: [],
              order: 1,
              default: false,
              id: 'pollapp.0',
            },
            {
              label: 'Mocha App',
              icon: 'fa-code',
              path: '/testapp',
              items: [],
              order: 0,
              default: true,
              id: 'testapp.0',
            },
            {
              label: 'AngularApp',
              icon: 'fa-handicap',
              path: '/angularapp',
              items: [],
              order: 3,
              id: 'angularapp.0',
            },
            {
              label: 'PolymerApp',
              icon: 'fa-cube',
              path: '/polymerapp',
              items: [],
              order: 5,
              default: false,
              id: 'polymerapp.0',
            },
            {
              label: 'TraceID App',
              icon: 'fa-heartbeat',
              path: '/sample-traceid-app',
              items: [],
              order: 7,
              default: false,
              id: 'app2.0',
            },
            {
              label: 'StoppedMicroapp',
              icon: 'fa-circle',
              path: '/stoppedmicroapp',
              items: [],
              order: 10,
              default: false,
              id: 'stoppedmicroapp.0',
            },
          ],
        },
        profile: {
          items: [
            {
              label: 'My Profile',
              icon: 'fa-user',
              path: '/profile',
              items: [],
              order: 13,
              default: false,
              id: 'profileapp.0',
            },
          ],
        },
        settings: {
          items: [
            {
              label: 'Settings App',
              icon: 'fa-gear',
              path: '/settings',
              items: [],
              order: 12,
              default: false,
              id: 'settings.0',
            },
          ],
        },
        paths: {
          pollapp: '/pollapp',
          testapp: '/testapp',
          angularapp: '/angularapp',
          polymerapp: '/polymerapp',
          app2: '/sample-traceid-app',
          stoppedmicroapp: '/stoppedmicroapp',
          settings: '/settings',
          profileapp: '/profile',
        },
        contextPath: '',
        user: {
          name: '@jonniespratley',
          firstName: 'Jonnie',
          lastName: 'Spratley',
          picture: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/49212/profile/profile-80.jpg?4',
          user_id: 'cef303ee-0830-4589-adae-b37088555946',
          user_name: 'test',
          email: 'jonniespratley@gmail.com',
        },
        preferences: {
          preferredLocale: 'en',
        },
        appName: 'AppHub Dev',
        localeData: {
          logOut: 'Log Out',
          toastTextDefault: 'You received a new notification.',
          toastActionLabelDefault: 'Action',
        },
      };
    </script>

    <script type="module" src="/build/ns-theme.esm.js"></script>
    <script nomodule src="/build/ns-theme.js"></script>
  </head>
  <body>
    <h2>ns-theme demo</h2>

    <ns-theme id="theme"> </ns-theme>
    <ns-theme-header id="headerExample" show-menu slot="header">
      <div slot="tabs">
        <ns-theme-tabs id="exampleTabs"></ns-theme-tabs>
      </div>
      <div slot="right">Right side</div>
    </ns-theme-header>
    <ns-theme-panels id="examplePanels" slot="content"> </ns-theme-panels>
    <ns-theme-drawer id="themeDrawer" headerText="Tab Manager" slot="drawer"> This is drawer custom content </ns-theme-drawer>
    <div id="js-menu"></div>
    <div id="js-user-menu"></div>
    <br />
    <hr />

    <!--
      <h2>ns-theme-header demo</h2>

      <ns-theme-header id="headerExample">
        <div slot="left">Left</div>
        <div slot="tabs"">Tab area</div>
        <div slot="right">Right side</div>
      </ns-theme-header>
      <br/>
      <ns-theme-header id="headerExample2">
        <div slot="menu">Menu Icon</div>
        <div slot="home">home</div>
        <div slot="left">Left</div>
        <div slot="tabs"">Tab area</div>
        <div slot="right">Right side</div>
      </ns-theme-header>
      <br>
      
      <h3>With Menu</h3>
      <ns-theme-header id="headerExample3" show-menu="true"></ns-theme-header>
      
      <h3>With Menu + Home</h3>
      <ns-theme-header id="headerExample4" show-menu="true" show-home="true"></ns-theme-header>


    -->
    <ns-theme-drawer id="d1" anchor="left">
      <p>This is DEFAULT drawer 1</p>
    </ns-theme-drawer>
    <ns-theme-drawer id="d2" anchor="top">
      <p>This is top drawer 2</p>
    </ns-theme-drawer>
    <ns-theme-drawer id="d3" anchor="right">
      <p>This is RIGHT drawer 3</p>
    </ns-theme-drawer>

    <br />
    <button id="addTab">Add Tab</button>

    <button id="d1btn">left drawer</button>
    <button id="d2btn">top drawer</button>
    <button id="d3btn">right drawer</button>
    <button id="d4btn">bottom drawer</button>

    <ns-spinner></ns-spinner>

    <style>
      .content {
        height: 99vh;
        background: white;
        color: black;
        padding: 1rem;
        padding-top: 3rem;
      }
    </style>

    <script>
      (async () => {
        let count = 0;

        await customElements.whenDefined('ns-theme');
        const nsTheme = document.querySelector('ns-theme');

        /**
         * Example using tabs
         */
        await customElements.whenDefined('ns-theme-tabs');
        const nsThemeTabs = document.querySelector('ns-theme-tabs');

        const nsThemePanels = document.querySelector('ns-theme-panels');
        console.log(nsTheme);
        console.log(nsThemePanels);

        nsThemeTabs.addEventListener('tabChange', e => {
          console.log('tabChange', e.detail);
        });
        nsThemeTabs.addEventListener('tabClick', e => {
          e.preventDefault();
          nsThemeTabs.toggleTab(e.detail);
          nsThemePanels.togglePanel(e.detail);
        });

        // TODO - Close panel when tab is closed.
        nsThemeTabs.addEventListener('tabClose', async (e) => {
          //Remove panel
          await nsThemePanels.closePanel(e.detail);
          let homeTab = await nsThemeTabs.selectHomeTab();
          //Change selected panel
          //nsThemePanels.selectedIndex = e.detail.index;
          await nsThemeTabs.toggleTab(homeTab);
          //await nsThemePanels.togglePanel(homeTab);
        });

        async function addTab(obj) {
          let t = {
            id: count === 0 ? 'home' : `app-${count}`,
            label: `Tab ${count}`,
            href: `/some-app/${count}`,
            panelId: `panel-${count}`,
            home: obj.default || count === 0,
            ...obj,
          };

          count++;
          let newTab = await nsThemeTabs.addTab(t);
          let pane = document.createElement('div');
          pane.id = t.panelId;
          pane.innerHTML = `
              <h4>${t.id}</h4>
              <p>This is the tab content</p>
              `;
          console.log('newTab', newTab);

          let newPanel = await nsThemePanels.addPanel(newTab, pane);

          console.log('newPanel', newPanel);

          //nsThemePanels.selectedIndex = newTab.index;
          nsThemeTabs.toggleTab(newTab);
          nsThemePanels.togglePanel(newTab);
        }

        document.addEventListener('DOMContentLoaded', () => {
          count++;
          window.nav.main.items.sort((a, b)=> {
          return a.order - b.order;
        }).map(item => {
            console.log('Adding', item);
            addTab(item);
          });

          document.querySelector('ns-theme-header').addEventListener('menuToggleClick', () => {
            console.log('toggle js-menu menu');
            document.querySelector('#js-menu [data-testid="app-menu__toggle"]').click();
          });

          document.querySelector('#addTab').addEventListener('click', () => {
            addTab({});
          });

          document.querySelector('#d1btn').addEventListener('click', () => {
            document.querySelector('#d1').toggle();
          });
          document.querySelector('#d2btn').addEventListener('click', () => {
            document.querySelector('#d2').toggle();
          });
          document.querySelector('#d3btn').addEventListener('click', () => {
            document.querySelector('#d3').toggle();
          });
          document.querySelector('#d4btn').addEventListener('click', () => {
            document.querySelector('#d4').toggle();
          });
        });
      })();
    </script>
  </body>
</html>
